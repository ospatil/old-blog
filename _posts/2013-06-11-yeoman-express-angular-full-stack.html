---
layout: post
title: Yeoman + Express + Angular = Full-Stack Workflow
date: '2013-06-11T10:58:00.000+05:30'
author: Omkar Patil
tags:
- javascript
- angularjs
- yeoman
- express
modified_time: '2013-06-11T10:58:43.961+05:30'
blogger_id: tag:blogger.com,1999:blog-3599227544422363853.post-4655441904448781479
blogger_orig_url: http://blog.omkarpatil.com/2013/06/yeoman-express-angular-full-stack.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><p><a href="http://yeoman.io/">Yeoman</a> is one amazing toolkit that makes kick-start and application development management workflow a breeze. It integrates a "preview" server based on <a href="https://github.com/senchalabs/connect">Connect</a> middleware but primarily concentrates on "client-side" workflow. While there is some <a href="https://github.com/yeoman/yeoman/wiki/Yeoman-and-Express">experimental support</a> for <a href="http://expressjs.com/">Express</a> and Yeoman guys have integration with various back-ends on their <a href="http://yeoman.io/roadmap.html">roadmap</a>, I needed a full-stack workflow solution right away that will not only serve my "SPA" client application but also be the "API" server. So, after tinkering for a couple of hours, here I'm, blogging about it :).</p><p>The process is quite simple and involves generating an application using Yeoman Angular generator in the usual manner and then a little modification of <i>Gruntfile.js</i>. Here are the steps - <br /><ol><li>Create an Angular application using Yeoman Angular generator in usual way.</li><li>Install <i>express</i>, <i>grunt-contrib-watch</i> and <i>grunt-express-server</i> using <i>npm install</i> and use the <i>save</i> flags as shown below so that the <i>package.json</i> file is updated automatically.<br /><pre>npm install express --save<br />npm install grunt-contrib-watch --save-dev<br />npm install grunt-express-server --save-dev<br /></pre></li><li>Uninstall <i>grunt-contrib-livereload</i>, <i>grunt-regarde</i> and <i>grunt-contrib-connect</i> using <i>npm uninstall</i>. These are not needed anymore and the plugins installed in previous step will provide the necessary functionality.<br /><pre>npm uninstall grunt-contrib-livereload --save-dev<br />npm uninstall grunt-regarde --save-dev<br />npm uninstall grunt-contrib-connect --save-dev<br /></pre></li><li>Now comes the modification of <i>Gruntfile.js</i> file. You'll need to remove configuration related to the plugins mentioned in the previous step and add configuration for plugins added in step 1. You can find the exact changes in the embedded gist by doing a diff between revisions.<br /></li><li>Add an Express server at the root of the directory. You can take <i>server.js</i> from the gist and build upon it.  <br /></li></ol>That's it. We now have a full-stack setup with all the Yeoman goodness fully preserved.<br /></p><p>Here a few points worth noting -<br /><ul><li><i>Gruntfile.js Line 20</i> - Note there are only dev and prod express servers configured. The original configuration had a connect-based test server too. But Karma doesn't need a server for running Angular unit as well as e2e tests. So  I think even the original  configuration is redundant. <br /></li><li><i>Gruntfile.js Line 54, 55</i> - I have added <i>server.js</i> file and server directory that will hold the server code in the app root directory. These have been added to <i>watch</i> configuration so that if server code is updated, application is reloaded and changes are reflected immediately. <br /></li><li><i>Gruntfile.js Line 271</i> - Express dev server has been added to the grunt server task.<br /></li><li><i>server.js Line 22 and 24</i> - The Express server serves the "client" files from <i>app</i> directory in <i>dev</i> mode and from <i>dist</i> directory in <i>production</i> mode, thereby providing nice integration with Yeoman build cycle.<br /></li><li>Live reloading of HTML in the browser - I tried client as well as server approach mentioned in the <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a> documentation to enable live reloading of HTML but nothing worked. So, finally I installed Chrome extension mentioned on the same page and it's working beautifully. With the watch configuration mentioned in earlier point, any code change, be it a server-side or client-side, is immediately reflected and browser is automatically refreshed making development experience a pleasure. <br /></li></ul></p><p>There you have it. A full stack Yeoman workflow with Express and livereloading.</p><p>Here is the <a href="https://gist.github.com/ospatil/5749626">gist</a>. Feel free to use the code in any manner you want. <br /><script src="https://gist.github.com/ospatil/5749626.js"></script><br /></p></div>